<div class="card">
    <div class="card-header">
        <h3>Edit Invoice #<%= invoice.invoice_number %></h3>
    </div>
    <div class="card-body">
        <form method="POST" action="/edit/<%= invoice.id %>">
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="issuer_id" class="form-label">Issuer</label>
                        <select class="form-select" id="issuer_id" name="issuer_id" required>
                            <% issuers.forEach(issuer => { %>
                                <option value="<%= issuer.id %>" <%= issuer.id === invoice.issuer_id ? 'selected' : '' %>>
                                    <%= issuer.name %> - <%= issuer.tax_number %>
                                </option>
                            <% }); %>
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="customer_id" class="form-label">Customer</label>
                        <select class="form-select" id="customer_id" name="customer_id" required>
                            <% customers.forEach(customer => { %>
                                <option value="<%= customer.id %>" <%= customer.id === invoice.customer_id ? 'selected' : '' %>>
                                    <%= customer.name %> - <%= customer.tax_number %>
                                </option>
                            <% }); %>
                        </select>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="invoice_number" class="form-label">Invoice Number</label>
                        <input type="text" class="form-control" id="invoice_number" name="invoice_number" value="<%= invoice.invoice_number %>" required>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="issue_date" class="form-label">Issue Date</label>
                        <input type="date" class="form-control" id="issue_date" name="issue_date" value="<%= invoice.issue_date %>" required>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="fulfillment_date" class="form-label">Fulfillment Date</label>
                        <input type="date" class="form-control" id="fulfillment_date" name="fulfillment_date" value="<%= invoice.fulfillment_date %>" required>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="due_date" class="form-label">Payment Due Date</label>
                        <input type="date" class="form-control" id="due_date" name="due_date" value="<%= invoice.due_date %>" required>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="total_amount" class="form-label">Total Amount (Ft)</label>
                        <input type="number" class="form-control" id="total_amount" name="total_amount" min="0" step="0.01" value="<%= invoice.total_amount %>" required>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="vat_rate" class="form-label">VAT Rate</label>
                        <select class="form-select" id="vat_rate" name="vat_rate" required>
                            <option value="0.05" <%= invoice.vat_rate == 0.05 ? 'selected' : '' %>>5%</option>
                            <option value="0.18" <%= invoice.vat_rate == 0.18 ? 'selected' : '' %>>18%</option>
                            <option value="0.27" <%= invoice.vat_rate == 0.27 ? 'selected' : '' %>>27%</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="mt-4">
                <button type="submit" class="btn btn-primary">Update Invoice</button>
                <a href="/" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </div>
</div>
